# Phase 2 設計仕様書
ビジネスエンパイア 2.0 - 新機能設計

## 📋 概要

Phase 2では以下の3つの主要機能を追加します：
1. **メニュー画面 & 3セーブスロット**
2. **気質パラメータシステム（8項目）**
3. **部署別採用システム**

---

## 🎮 機能1: メニュー画面 & 3セーブスロット

### 要件
- ゲーム起動時にメニュー画面を表示
- 3つのセーブスロットを選択可能
- 新規ゲーム開始、ロード、削除の操作
- 各スロットに詳細情報を表示

### UI/UX設計（Gemini調査結果に基づく）

#### 表示情報（各スロット）
**必須情報:**
- スロット番号（1/2/3）
- プレイ時間（例: 3時間24分）
- 最終セーブ日時（例: 2025/10/28 15:30）
- 現在の日付（ゲーム内: 2025年3月 第2週）

**推奨情報:**
- 会社名（例: 株式会社スタートアップ）
- 資金（例: 1,250万円）
- 従業員数（例: 5人）
- 市場シェア（例: 2.3%）
- 進捗度インジケーター（ブランド力の星など）

**ビジュアル情報:**
- ミニグラフ（売上推移の小さなグラフ）
- または、会社ランクに応じたアイコン

#### 操作フロー

**新規ゲーム開始:**
1. 空きスロットに「空のデータ」または「+ 新しいゲーム」表示
2. 既存データがあるスロット選択時は確認ダイアログ表示
   - 「このデータに上書きしますか？」
   - キャンセル / 上書き
3. 上書き確定後、ゲーム開始

**ゲームのロード:**
1. セーブデータがあるスロットをクリック
2. スロットをハイライト表示
3. 確認ダイアログ表示
   - 「このデータでゲームを開始しますか？」
   - キャンセル / 開始
4. 開始後、ゲーム画面に遷移

**データの削除:**
1. 各スロットに「🗑️ 削除」ボタン配置
2. クリック時、二段階確認ダイアログ
   - 「本当に削除しますか？一度削除したデータは元に戻せません。」
   - キャンセル / 削除
3. 削除後、スロットが「空のデータ」に変化

#### デザイントレンド（Gemini推奨）
- **すりガラス効果**: 背景をぼかしてUIを重ねる
- **ミニマルデザイン**: 情報の優先順位を明確に
- **滑らかなアニメーション**: ホバー時・選択時のフィードバック
- **世界観の反映**: ゲーム内のビジネステーマに沿った配色（ブルー/グレー系）

### 技術実装

#### ストレージキー設計
```typescript
// 3つのスロット用キー
const SAVE_KEYS = [
  'BusinessEmpire_Save_Slot_1',
  'BusinessEmpire_Save_Slot_2',
  'BusinessEmpire_Save_Slot_3'
]

// スロットメタデータ（一覧表示用）
const METADATA_KEY = 'BusinessEmpire_SaveMetadata'
```

#### メタデータ構造
```typescript
interface SaveMetadata {
  slotId: number
  companyName: string
  playTime: number // 秒単位
  lastSaveDate: string // ISO 8601形式
  gameDate: { year: number, month: number, week: number }
  money: number
  employeeCount: number
  marketShare: number
  brandLevel: number
}
```

#### 画面遷移
```
起動 → メニュー画面 → スロット選択 → ゲーム画面
                  ↓
              設定/終了
```

---

## 👤 機能2: 気質パラメータシステム

### 要件
- 職能（技術力、営業力、企画力、管理力）とは別の性格特性
- 従業員ごとに8つの気質パラメータを持つ
- 気質が業務効率、相性、イベントに影響

### パラメータ設計（Perplexity調査結果に基づく）

#### 8つの気質パラメータ（0-100スケール）

| パラメータ | 説明 | ゲーム内効果 |
|-----------|------|-------------|
| **大胆さ** | 新しい挑戦やリスクを恐れない | 新製品開発時のボーナス、失敗時のダメージ軽減 |
| **勇敢さ** | 困難や危機に立ち向かう力 | プレッシャー下でのパフォーマンス向上、納期間近の効率UP |
| **協調性** | チームワークや他者との協力 | チームボーナス増加、部署効率UP、相性判定に影響 |
| **創造性** | 斬新な発想やアイデアを生み出す | 企画職・開発職での効率ボーナス、イノベーション確率UP |
| **誠実性** | 責任感・真面目さ・コツコツ努力 | 品質向上、バグ率低減、長期プロジェクトでのボーナス |
| **感情安定性** | ストレス耐性、情緒の安定 | 残業時の効率低下を軽減、長期勤務でのモチベーション維持 |
| **社交性** | 他者との交流やコミュニケーション | 営業職での効率ボーナス、顧客満足度UP、採用活動補助 |
| **慎重さ** | リスク回避、計画的な行動 | バグ率低減、プロジェクト失敗率減少、管理職向き |

#### 表示方法
```
従業員詳細モーダル:
┌─────────────────────────────────┐
│ 田中太郎 (29歳) 🧠論理思考型      │
├─────────────────────────────────┤
│ 【職能】                         │
│ 技術力: ████████░░ 82          │
│ 営業力: ███░░░░░░░ 45          │
│ 企画力: ██████░░░░ 68          │
│ 管理力: █████░░░░░ 55          │
│                                  │
│ 【気質】                         │
│ 大胆さ: ██████░░░░ 65          │
│ 勇敢さ: ███████░░░ 72          │
│ 協調性: ████░░░░░░ 48          │
│ 創造性: ████████░░ 85  ⭐      │
│ 誠実性: ███████░░░ 78          │
│ 感情安定性: █████░░░░░ 55      │
│ 社交性: ██░░░░░░░░ 30          │
│ 慎重さ: ████████░░ 82  ⭐      │
└─────────────────────────────────┘
```

#### 生成ロジック
```typescript
// 新規従業員生成時
function generateTemperament() {
  return {
    boldness: Math.floor(Math.random() * 100),
    bravery: Math.floor(Math.random() * 100),
    cooperation: Math.floor(Math.random() * 100),
    creativity: Math.floor(Math.random() * 100),
    conscientiousness: Math.floor(Math.random() * 100),
    emotionalStability: Math.floor(Math.random() * 100),
    sociability: Math.floor(Math.random() * 100),
    cautiousness: Math.floor(Math.random() * 100)
  }
}

// 性格タイプ（PERSONALITIES）との関連付け
// 例: 「情熱家」タイプは大胆さ+20, 慎重さ-15など
```

#### 既存システムとの統合
- 相性計算に気質パラメータを追加
- 研修で気質パラメータも成長可能に
- 特定の気質が高い従業員向けの特別イベント

---

## 🏢 機能3: 部署別採用システム

### 要件
- 各部署（開発、営業、企画、管理）ごとに採用活動を実施
- 応募者のスキルが部署に適したものになる
- 部署の規模や評判が応募者の質に影響

### 設計

#### 部署ごとの応募者生成

**開発部門:**
- 技術力: 高め（60-95）
- 創造性: 高め（55-90）
- 誠実性: 高め（60-85）
- 社交性: 低め（20-60）

**営業部門:**
- 営業力: 高め（60-95）
- 社交性: 高め（65-95）
- 大胆さ: 高め（55-85）
- 慎重さ: 低め（20-55）

**企画部門:**
- 企画力: 高め（60-95）
- 創造性: 高め（70-95）
- 協調性: 中～高（50-80）

**管理部門:**
- 管理力: 高め（60-95）
- 誠実性: 高め（65-90）
- 慎重さ: 高め（60-90）
- 感情安定性: 高め（55-85）

#### UI設計

```
【採用活動】画面:

┌─────────────────────────────────┐
│ 📊 概要  👥 人事  🏢 部署  📦 製品 │
└─────────────────────────────────┘

部署別採用:
┌─────────────────────────────────┐
│ どの部署で採用活動を行いますか？   │
│                                  │
│ [💻 開発部門] 現在: 3人          │
│ [📞 営業部門] 現在: 2人          │
│ [📊 企画部門] 現在: 1人          │
│ [📋 管理部門] 現在: 0人          │
└─────────────────────────────────┘

↓ 部署選択後

┌─────────────────────────────────┐
│ 💻 開発部門 - 応募者リスト        │
├─────────────────────────────────┤
│ 佐藤花子 (25歳) 🧠論理思考型      │
│ 技術力:85 企画力:62 創造性:78     │
│ 給与希望: 450万円/年              │
│ [面接する]                       │
├─────────────────────────────────┤
│ 鈴木一郎 (28歳) 🔥情熱家         │
│ 技術力:72 企画力:55 創造性:88     │
│ 給与希望: 420万円/年              │
│ [面接する]                       │
└─────────────────────────────────┘
```

#### 実装詳細

```typescript
interface Department {
  id: string
  name: string
  employees: Employee[]
  skillWeights: {
    technical: number
    sales: number
    planning: number
    management: number
  }
  temperamentWeights: {
    boldness?: number
    creativity?: number
    sociability?: number
    cautiousness?: number
    conscientiousness?: number
  }
}

// 部署に適した候補者生成
function generateCandidatesForDepartment(dept: Department, count: number) {
  const candidates = []
  for (let i = 0; i < count; i++) {
    const candidate = {
      ...generateBaseCandidate(),
      // 部署のskillWeightsに基づいてスキルを調整
      technical: weightedRandom(dept.skillWeights.technical),
      sales: weightedRandom(dept.skillWeights.sales),
      planning: weightedRandom(dept.skillWeights.planning),
      management: weightedRandom(dept.skillWeights.management),
      // 気質パラメータも部署に合わせて調整
      temperament: generateWeightedTemperament(dept.temperamentWeights)
    }
    candidates.push(candidate)
  }
  return candidates
}
```

---

## 📅 実装スケジュール

### Phase 2A: 基盤整備（1-2時間）
- [ ] 気質パラメータの型定義
- [ ] 従業員データ構造の拡張
- [ ] 部署データ構造の定義

### Phase 2B: メニュー画面（2-3時間）
- [ ] メニュー画面HTML/CSS
- [ ] セーブスロット一覧表示
- [ ] ロード/削除機能
- [ ] メタデータ管理システム

### Phase 2C: 気質パラメータ（1-2時間）
- [ ] 気質パラメータ生成ロジック
- [ ] 従業員詳細画面への表示追加
- [ ] 性格タイプとの関連付け
- [ ] 業務効率への影響実装

### Phase 2D: 部署別採用（2-3時間）
- [ ] 部署管理システム
- [ ] 部署別採用UI
- [ ] 部署に適した候補者生成
- [ ] 既存採用システムとの統合

### Phase 2E: テスト & 調整（1時間）
- [ ] 全機能の動作確認
- [ ] バランス調整
- [ ] UI/UXの改善

**合計見積もり: 7-11時間**

---

## 🎨 将来の拡張（Phase 3以降）

### キャラクターアイコン & アニメーション
- ドット絵またはアイコンベースのキャラクター表現
- カイロソフト風の動きのあるキャラクター
- 従業員の状態（仕事中、休憩、疲労）を視覚化
- オフィスレイアウト上でキャラクターが移動

**技術候補:**
- Canvas API / WebGL
- PixiJS (2Dゲームエンジン)
- Phaser.js (ゲームフレームワーク)
- スプライトアニメーション

**参考:**
- カイロソフトのドット絵キャラクター
- Stardew Valleyのキャラクターシステム
- RimWorldの従業員表現

---

## 📚 参考資料

**気質パラメータ調査 (Perplexity):**
- カイロソフトゲームの性格システム
- ビッグファイブ性格特性理論
- 経営シミュレーションのキャラクター設計

**メニューUI/UX設計 (Gemini):**
- モダンゲームのセーブ画面デザイン
- Apex Legendsのすりガラス効果UI
- ペルソナ5のスタイリッシュUI
- プラットフォーム最適化のベストプラクティス

---

**作成日**: 2025-10-28
**バージョン**: 1.0
**作成者**: Claude Code (AI協働チーム)
