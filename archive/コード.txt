<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ãƒ“ã‚¸ãƒã‚¹ã‚¨ãƒ³ãƒ‘ã‚¤ã‚¢ - çµŒå–¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        .company-name { font-size: 22px; font-weight: bold; margin-bottom: 8px; }
        .date { font-size: 14px; opacity: 0.9; }
        .stats {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: rgba(255,255,255,0.1);
        }
        .stat { text-align: center; }
        .stat-label { font-size: 12px; opacity: 0.8; margin-bottom: 4px; }
        .stat-value { font-size: 18px; font-weight: bold; }
        
        /* ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚«ãƒ¼ */
        .news-ticker {
            background: #333;
            color: #ffd700;
            padding: 8px;
            overflow: hidden;
            white-space: nowrap;
            font-size: 12px;
        }
        .news-ticker span {
            display: inline-block;
            animation: scroll 20s linear infinite;
        }
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º */
        .ranking-bar {
            background: #f0f0f0;
            padding: 10px;
            display: flex;
            justify-content: space-around;
            font-size: 11px;
        }
        .rank-item {
            text-align: center;
            padding: 5px;
            border-radius: 5px;
        }
        .rank-item.player { background: #ffd700; font-weight: bold; }
        
        .tabs {
            display: flex;
            padding: 15px 15px 0;
            gap: 10px;
            overflow-x: auto;
            background: white;
        }
        .tab {
            padding: 10px 15px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
            color: #666;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .content {
            padding: 20px;
            min-height: 400px;
            background: white;
        }
        .panel { display: none; }
        .panel.active { display: block; }
        .btn {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }
        .btn:active { transform: scale(0.98); }
        .employee {
            background: #f8f8f8;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .employee-name { font-weight: bold; font-size: 16px; }
        .personality {
            background: #667eea;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
        }
        .abilities {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 10px 0;
        }
        .ability { font-size: 13px; }
        .ability-name { color: #666; }
        .ability-value { font-weight: bold; color: #333; }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 350px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .modal-title { font-size: 20px; font-weight: bold; margin-bottom: 15px; }
        .modal-close {
            width: 100%;
            padding: 12px;
            background: #e0e0e0;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            margin-top: 15px;
            cursor: pointer;
        }
        .empty { text-align: center; color: #999; padding: 40px 20px; }
        .product {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
        }
        .info-box {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .competitor {
            background: #fff3cd;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            border-left: 3px solid #ff9800;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="company-name">æ ªå¼ä¼šç¤¾ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—</div>
            <div class="date" id="gameDate">2025å¹´1æœˆ ç¬¬1é€±</div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">ğŸ’° è³‡é‡‘</div>
                    <div class="stat-value" id="money">1000ä¸‡</div>
                </div>
                <div class="stat">
                    <div class="stat-label">ğŸ‘¥ å¾“æ¥­å“¡</div>
                    <div class="stat-value" id="employeeCount">1</div>
                </div>
                <div class="stat">
                    <div class="stat-label">ğŸ“Š å£²ä¸Š</div>
                    <div class="stat-value" id="revenue">0ä¸‡</div>
                </div>
            </div>
        </div>

        <!-- ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚«ãƒ¼ -->
        <div class="news-ticker">
            <span id="newsText">ğŸ“° ã‚²ãƒ¼ãƒ é–‹å§‹ï¼ITæ¥­ç•Œã§æˆåŠŸã‚’ç›®æŒ‡ãã†ï¼</span>
        </div>

        <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º -->
        <div class="ranking-bar" id="rankingBar">
            <div class="rank-item">1ä½: ãƒ†ãƒƒã‚¯ã‚³ãƒ¼ãƒ—(35%)</div>
            <div class="rank-item">2ä½: ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¯ãƒ¼ã‚¯ã‚¹(29%)</div>
            <div class="rank-item">3ä½: ã‚µã‚¤ãƒãƒ¼ã‚½ãƒ•ãƒˆ(22%)</div>
            <div class="rank-item player">4ä½: ã‚ãªãŸ(0.1%)</div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showPanel('overview')">ğŸ“Š æ¦‚è¦</button>
            <button class="tab" onclick="showPanel('employees')">ğŸ‘¥ äººäº‹</button>
            <button class="tab" onclick="showPanel('products')">ğŸ“¦ è£½å“</button>
            <button class="tab" onclick="showPanel('market')">ğŸ¢ å¸‚å ´</button>
            <button class="tab" onclick="showPanel('finance')">ğŸ’° è²¡å‹™</button>
        </div>

        <div class="content">
            <div id="overview" class="panel active">
                <h3>ğŸ¢ ä¼šç¤¾æ¦‚è¦</h3>
                <div class="info-box">
                    <div>æ¥­ç•Œ: ITãƒ»ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢</div>
                    <div>å¸‚å ´ã‚·ã‚§ã‚¢: <span id="marketShare">0.1%</span></div>
                    <div>ãƒ–ãƒ©ãƒ³ãƒ‰åŠ›: <span id="brand">â­</span></div>
                </div>
                <button class="btn" onclick="nextTurn()">â­ï¸ æ¬¡ã®ã‚¿ãƒ¼ãƒ³ã¸</button>
                <button class="btn" onclick="saveGame()">ğŸ’¾ ã‚²ãƒ¼ãƒ ä¿å­˜</button>
            </div>

            <div id="employees" class="panel">
                <h3>ğŸ‘¥ å¾“æ¥­å“¡ç®¡ç†</h3>
                <div id="employeeList"></div>
                <button class="btn" onclick="showHiring()">â• æ¡ç”¨æ´»å‹•</button>
                <button class="btn" onclick="trainEmployees()">ğŸ“š ç ”ä¿®å®Ÿæ–½</button>
            </div>

            <div id="products" class="panel">
                <h3>ğŸ“¦ è£½å“é–‹ç™º</h3>
                <div id="productList"></div>
                <button class="btn" onclick="developProduct()">ğŸ”§ æ–°è£½å“é–‹ç™º</button>
            </div>

            <div id="market" class="panel">
                <h3>ğŸ¢ å¸‚å ´çŠ¶æ³</h3>
                <div id="marketInfo"></div>
                <button class="btn" onclick="doMarketing()">ğŸ“¢ ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°</button>
            </div>

            <div id="finance" class="panel">
                <h3>ğŸ’° è²¡å‹™çŠ¶æ³</h3>
                <div id="financeInfo"></div>
                <button class="btn" onclick="getLoan()">ğŸ¦ éŠ€è¡Œèè³‡</button>
            </div>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-title" id="modalTitle"></div>
            <div id="modalBody"></div>
            <button class="modal-close" onclick="closeModal()">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿
        const game = {
            money: 10000000,
            employees: [],
            products: [],
            turn: 1,
            year: 2025,
            month: 1,
            week: 1,
            marketShare: 0.1,
            brandPower: 1,
            monthlyRevenue: 0,
            debt: 0
        };

        // ç«¶åˆAIä¼æ¥­
        const competitors = [
            { name: 'ãƒ†ãƒƒã‚¯ã‚³ãƒ¼ãƒ—', share: 35, strategy: 'aggressive', power: 100 },
            { name: 'ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ¯ãƒ¼ã‚¯ã‚¹', share: 29, strategy: 'balanced', power: 85 },
            { name: 'ã‚µã‚¤ãƒãƒ¼ã‚½ãƒ•ãƒˆ', share: 22, strategy: 'defensive', power: 70 }
        ];

        // ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”Ÿæˆ
        const newsTemplates = [
            '${company}ãŒæ–°è£½å“ã‚’ç™ºè¡¨ï¼æ¥­ç•Œã«è¡æ’ƒ',
            '${company}ã®å£²ä¸ŠãŒ${percent}%å¢—åŠ ',
            'ITæ¥­ç•Œã®æˆé•·ç‡ãŒ${percent}%ã«',
            '${company}ãŒå¤§å‹è²·åã‚’æ¤œè¨ä¸­',
            'æ–°æŠ€è¡“ã®ç™»å ´ã§å¸‚å ´ãŒæ´»æ€§åŒ–',
            '${company}ã®CEOãŒä»Šå¾Œã®æˆ¦ç•¥ã‚’èªã‚‹',
            'ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ä¼æ¥­ã®å‚å…¥ãŒç›¸æ¬¡ã'
        ];

        // åˆæœŸåŒ–
        function init() {
            const initialEmployee = {
                id: 1,
                name: 'å±±ç”° å¤ªéƒ',
                personality: 'ã¾ã˜ã‚',
                abilities: { technical: 65, sales: 45, planning: 55, management: 50 },
                motivation: 75,
                salary: 400000,
                department: 'é–‹ç™ºéƒ¨'
            };
            game.employees.push(initialEmployee);
            updateDisplay();
            generateNews();
        }

        // ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”Ÿæˆ
        function generateNews() {
            const template = newsTemplates[Math.floor(Math.random() * newsTemplates.length)];
            const company = competitors[Math.floor(Math.random() * competitors.length)].name;
            const percent = Math.floor(Math.random() * 30) + 10;
            const news = template.replace('${company}', company).replace('${percent}', percent);
            document.getElementById('newsText').textContent = 'ğŸ“° ' + news;
        }

        // ç«¶åˆAIè¡Œå‹•
        function updateCompetitors() {
            competitors.forEach(comp => {
                // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æˆé•·ã«å¿œã˜ã¦ç«¶åˆã‚‚åå¿œ
                if (game.marketShare > 5) {
                    if (comp.strategy === 'aggressive') {
                        comp.power += 5;
                        generateNews();
                    }
                }
                
                // ã‚·ã‚§ã‚¢å¤‰å‹•
                const change = (Math.random() - 0.5) * 2;
                comp.share = Math.max(10, Math.min(50, comp.share + change));
            });
            updateRanking();
        }

        // ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°
        function updateRanking() {
            const allCompanies = [
                ...competitors.map(c => ({ name: c.name, share: c.share })),
                { name: 'ã‚ãªãŸ', share: game.marketShare, isPlayer: true }
            ].sort((a, b) => b.share - a.share);

            const rankingHtml = allCompanies.slice(0, 4).map((company, index) => 
                `<div class="rank-item ${company.isPlayer ? 'player' : ''}">
                    ${index + 1}ä½: ${company.name}(${company.share.toFixed(1)}%)
                </div>`
            ).join('');
            
            document.getElementById('rankingBar').innerHTML = rankingHtml;
        }

        // ãƒ‘ãƒãƒ«åˆ‡ã‚Šæ›¿ãˆ
        function showPanel(panelId) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(panelId).classList.add('active');
            
            if (panelId === 'employees') renderEmployees();
            if (panelId === 'products') renderProducts();
            if (panelId === 'market') renderMarket();
            if (panelId === 'finance') renderFinance();
        }

        // è¡¨ç¤ºæ›´æ–°
        function updateDisplay() {
            document.getElementById('money').textContent = `${Math.floor(game.money / 10000)}ä¸‡`;
            document.getElementById('employeeCount').textContent = game.employees.length;
            document.getElementById('revenue').textContent = `${Math.floor(game.monthlyRevenue / 10000)}ä¸‡`;
            document.getElementById('gameDate').textContent = `${game.year}å¹´${game.month}æœˆ ç¬¬${game.week}é€±`;
            document.getElementById('marketShare').textContent = `${game.marketShare.toFixed(1)}%`;
            document.getElementById('brand').textContent = 'â­'.repeat(Math.min(5, game.brandPower));
        }

        // å¾“æ¥­å“¡è¡¨ç¤º
        function renderEmployees() {
            const list = document.getElementById('employeeList');
            if (game.employees.length === 0) {
                list.innerHTML = '<div class="empty">å¾“æ¥­å“¡ãŒã„ã¾ã›ã‚“</div>';
                return;
            }
            list.innerHTML = game.employees.map(emp => `
                <div class="employee">
                    <div class="employee-header">
                        <div class="employee-name">${emp.name}</div>
                        <span class="personality">${emp.personality}</span>
                    </div>
                    <div class="abilities">
                        <div class="ability">
                            <span class="ability-name">æŠ€è¡“:</span>
                            <span class="ability-value">${emp.abilities.technical}</span>
                        </div>
                        <div class="ability">
                            <span class="ability-name">å–¶æ¥­:</span>
                            <span class="ability-value">${emp.abilities.sales}</span>
                        </div>
                    </div>
                    <div>æœˆçµ¦: ${Math.floor(emp.salary / 10000)}ä¸‡å††</div>
                </div>
            `).join('');
        }

        // è£½å“è¡¨ç¤º
        function renderProducts() {
            const list = document.getElementById('productList');
            if (game.products.length === 0) {
                list.innerHTML = '<div class="empty">è£½å“ãŒã‚ã‚Šã¾ã›ã‚“</div>';
                return;
            }
            list.innerHTML = game.products.map(product => `
                <div class="product">
                    <div style="font-weight: bold;">${product.name}</div>
                    <div>å“è³ª: ${product.quality}%</div>
                    <div>å£²ä¸Š: ${Math.floor(product.sales / 10000)}ä¸‡å††</div>
                </div>
            `).join('');
        }

        // å¸‚å ´æƒ…å ±è¡¨ç¤º
        function renderMarket() {
            const info = document.getElementById('marketInfo');
            info.innerHTML = `
                <h4>ğŸ† ç«¶åˆä¼æ¥­</h4>
                ${competitors.map(comp => `
                    <div class="competitor">
                        <strong>${comp.name}</strong>
                        <div>å¸‚å ´ã‚·ã‚§ã‚¢: ${comp.share.toFixed(1)}%</div>
                        <div>æˆ¦ç•¥: ${comp.strategy === 'aggressive' ? 'æ”»æ’ƒçš„' : 
                                   comp.strategy === 'balanced' ? 'ãƒãƒ©ãƒ³ã‚¹å‹' : 'å®ˆå‚™çš„'}</div>
                    </div>
                `).join('')}
            `;
        }

        // è²¡å‹™æƒ…å ±è¡¨ç¤º
        function renderFinance() {
            const info = document.getElementById('financeInfo');
            const salaryTotal = game.employees.reduce((sum, emp) => sum + emp.salary, 0);
            info.innerHTML = `
                <div class="info-box">
                    <div>å£²ä¸Šé«˜: ${Math.floor(game.monthlyRevenue / 10000)}ä¸‡å††</div>
                    <div>äººä»¶è²»: ${Math.floor(salaryTotal / 10000)}ä¸‡å††</div>
                    <div>ç´”åˆ©ç›Š: ${Math.floor((game.monthlyRevenue - salaryTotal) / 10000)}ä¸‡å††</div>
                    ${game.debt ? `<div>å€Ÿé‡‘: ${Math.floor(game.debt / 10000)}ä¸‡å††</div>` : ''}
                </div>
            `;
        }

        // æ¡ç”¨
        function showHiring() {
            if (game.money < 200000) {
                showModal('æ¡ç”¨å¤±æ•—', 'è³‡é‡‘ä¸è¶³ã§ã™ï¼ˆæœ€ä½20ä¸‡å††å¿…è¦ï¼‰');
                return;
            }
            const names = ['ä½è—¤', 'éˆ´æœ¨', 'é«˜æ©‹', 'ç”°ä¸­'];
            const firstNames = ['å¤ªéƒ', 'èŠ±å­', 'ä¸€éƒ', 'ç¾å’²'];
            const personalities = ['ã™ãªãŠ', 'ã¾ã˜ã‚', 'ãŠèª¿å­è€…', 'é‡å¿ƒå®¶', 'å”èª¿çš„'];
            
            const candidate = {
                id: Date.now(),
                name: names[Math.floor(Math.random() * names.length)] + ' ' + 
                      firstNames[Math.floor(Math.random() * firstNames.length)],
                personality: personalities[Math.floor(Math.random() * personalities.length)],
                abilities: {
                    technical: 30 + Math.floor(Math.random() * 50),
                    sales: 30 + Math.floor(Math.random() * 50),
                    planning: 30 + Math.floor(Math.random() * 50),
                    management: 30 + Math.floor(Math.random() * 50)
                },
                motivation: 70,
                salary: 300000 + Math.floor(Math.random() * 200000),
                department: 'é–‹ç™ºéƒ¨'
            };
            
            const html = `
                <div>å€™è£œè€…: ${candidate.name}</div>
                <div>æ€§æ ¼: ${candidate.personality}</div>
                <div>æŠ€è¡“: ${candidate.abilities.technical}</div>
                <div>å–¶æ¥­: ${candidate.abilities.sales}</div>
                <div>å¸Œæœ›çµ¦ä¸: ${Math.floor(candidate.salary / 10000)}ä¸‡å††/æœˆ</div>
                <button class="btn" onclick="hireEmployee(${JSON.stringify(candidate).replace(/"/g, '&quot;')})">æ¡ç”¨ã™ã‚‹</button>
            `;
            showModal('æ¡ç”¨é¢æ¥', html);
        }

        // æ¡ç”¨å®Ÿè¡Œ
        function hireEmployee(candidate) {
            if (game.money < candidate.salary * 3) {
                showModal('æ¡ç”¨å¤±æ•—', 'è³‡é‡‘ä¸è¶³ã§ã™');
                return;
            }
            game.money -= candidate.salary * 3;
            game.employees.push(candidate);
            updateDisplay();
            closeModal();
            showModal('æ¡ç”¨æˆåŠŸ', `${candidate.name}ã•ã‚“ã‚’æ¡ç”¨ã—ã¾ã—ãŸï¼`);
        }

        // ç ”ä¿®
        function trainEmployees() {
            if (game.employees.length === 0) {
                showModal('ç ”ä¿®å¤±æ•—', 'å¾“æ¥­å“¡ãŒã„ã¾ã›ã‚“');
                return;
            }
            const cost = 300000 * game.employees.length;
            if (game.money < cost) {
                showModal('ç ”ä¿®å¤±æ•—', `è³‡é‡‘ä¸è¶³ã§ã™ï¼ˆå¿…è¦: ${cost / 10000}ä¸‡å††ï¼‰`);
                return;
            }
            game.money -= cost;
            game.employees.forEach(emp => {
                Object.keys(emp.abilities).forEach(key => {
                    emp.abilities[key] = Math.min(100, emp.abilities[key] + 10);
                });
            });
            showModal('ç ”ä¿®å®Œäº†', 'å¾“æ¥­å“¡ã®ã‚¹ã‚­ãƒ«ãŒå‘ä¸Šã—ã¾ã—ãŸï¼');
            updateDisplay();
        }

        // è£½å“é–‹ç™º
        function developProduct() {
            if (game.employees.length < 2) {
                showModal('é–‹ç™ºå¤±æ•—', 'æœ€ä½2åã®å¾“æ¥­å“¡ãŒå¿…è¦ã§ã™');
                return;
            }
            if (game.money < 2000000) {
                showModal('é–‹ç™ºå¤±æ•—', 'è³‡é‡‘ä¸è¶³ã§ã™ï¼ˆ200ä¸‡å††å¿…è¦ï¼‰');
                return;
            }
            game.money -= 2000000;
            const product = {
                id: Date.now(),
                name: `è£½å“${game.products.length + 1}`,
                quality: 50 + Math.floor(Math.random() * 30),
                sales: 0
            };
            game.products.push(product);
            showModal('é–‹ç™ºæˆåŠŸ', `${product.name}ã‚’é–‹ç™ºã—ã¾ã—ãŸï¼`);
            updateDisplay();
        }

        // ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°
        function doMarketing() {
            if (game.money < 1000000) {
                showModal('å®Ÿæ–½å¤±æ•—', 'è³‡é‡‘ä¸è¶³ã§ã™ï¼ˆ100ä¸‡å††å¿…è¦ï¼‰');
                return;
            }
            game.money -= 1000000;
            game.marketShare = Math.min(15, game.marketShare + 0.3);
            game.brandPower = Math.min(5, game.brandPower + 1);
            showModal('ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆåŠŸ', 'å¸‚å ´ã‚·ã‚§ã‚¢ã¨ãƒ–ãƒ©ãƒ³ãƒ‰åŠ›ãŒå‘ä¸Šï¼');
            updateDisplay();
            updateRanking();
        }

        // èè³‡
        function getLoan() {
            game.money += 5000000;
            game.debt += 5500000;
            showModal('èè³‡å®Ÿè¡Œ', '500ä¸‡å††ã®èè³‡ã‚’å—ã‘ã¾ã—ãŸï¼ˆåˆ©æ¯è¾¼ã¿è¿”æ¸ˆé¡: 550ä¸‡å††ï¼‰');
            updateDisplay();
        }

        // ã‚¿ãƒ¼ãƒ³é€²è¡Œ
        function nextTurn() {
            game.turn++;
            game.week++;
            if (game.week > 4) {
                game.week = 1;
                game.month++;
                if (game.month > 12) {
                    game.month = 1;
                    game.year++;
                }
                
                // æœˆæ¬¡å‡¦ç†
                const revenue = game.products.reduce((sum, p) => sum + (p.quality * 10000), 0);
                const costs = game.employees.reduce((sum, emp) => sum + emp.salary, 0);
                game.monthlyRevenue = revenue;
                game.money += revenue - costs;
                
                if (game.money < 0) {
                    showModal('ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼', 'è³‡é‡‘ä¸è¶³ã§å€’ç”£ã—ã¾ã—ãŸ...');
                    return;
                }
                
                // ç«¶åˆAIæ›´æ–°
                updateCompetitors();
                generateNews();
                
                showModal('æœˆæ¬¡æ±ºç®—', `å£²ä¸Š: ${revenue/10000}ä¸‡å††\nçµŒè²»: ${costs/10000}ä¸‡å††\nåˆ©ç›Š: ${(revenue-costs)/10000}ä¸‡å††`);
            }
            updateDisplay();
        }

        // ã‚»ãƒ¼ãƒ–
        function saveGame() {
            localStorage.setItem('businessEmpire', JSON.stringify(game));
            showModal('ä¿å­˜å®Œäº†', 'ã‚²ãƒ¼ãƒ ã‚’ä¿å­˜ã—ã¾ã—ãŸ');
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«
        function showModal(title, body) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = body.replace(/\n/g, '<br>');
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        init();
    </script>
</body>
</html>