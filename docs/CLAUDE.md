# 経営シミュレーションゲーム - プロジェクト設定

このプロジェクトは、JavaScriptベースのブラウザ経営シミュレーションゲームです。

---

## 📂 プロジェクト構成

```
経営シミュレーション/
├── index.html              # メインHTML
├── css/
│   └── enhanced-style.css  # 拡張スタイル
└── js/
    ├── enhanced-business-game.js  # コアゲームロジック
    ├── enhanced-employee.js       # 従業員システム
    ├── enhanced-game-data.js      # ゲームデータ定義
    └── enhanced-ui.js             # UI管理
```

---

## 🎯 プロジェクト固有のAI活用ルール

### コーディング規約
- **セキュリティ最優先**: すべてのユーザー入力は `escapeHtml()` でエスケープ
- **単位の一貫性**: 給与は万円単位、内部計算時は円単位 (`* 10000`)
- **nullish coalescing**: `||` ではなく `??` を使用（0値を正しく扱う）
- **可読性**: 日本語コメント推奨、関数名は英語

### Codex活用（実装・レビュー）
- 新機能実装時は必ずCodexにレビュー依頼
- 複雑なゲームロジック（採用システム、パフォーマンス計算等）はCodexに設計相談

### Gemini活用（デバッグ）
- ゲーム内バグ（給与計算ミス、ミッション進捗バグ等）はGeminiで調査
- ブラウザコンソールエラーはGeminiに分析依頼

### 実装済み機能
- ✅ Phase 1: デイリーミッション、成長ダッシュボード、従業員ストーリーカード
- ✅ セキュリティ: XSS対策（escapeHtml実装）
- ✅ バグ修正: データ永続化、能力値0問題、月次計算等

---

## 🔧 開発ワークフロー

### 新機能追加
1. 要件定義（私 or ユーザー）
2. 設計レビュー（Codex）
3. 実装（Codex or 私）
4. コードレビュー（Codex）
5. 統合テスト（私）

### バグ修正
1. 現象確認（私）
2. 原因調査（Gemini）
3. 修正実装（私）
4. リグレッションテスト（私）

---

## 📝 開発メモ

### 注意点
- Chart.jsグラフは破棄→再作成でメモリリーク防止
- localStorage保存時は全データシリアライズ
- ミッションは「しきい値型」と「累積型」を明確に区別

### 今後の課題
- 残りのCodex指摘事項（該当なし - 全修正完了）
- パフォーマンス最適化（大量従業員時の処理）
- モバイル対応UI

---

**グローバル設定 (`~/CLAUDE.md`) と組み合わせて、効率的な開発を進めてください!**
